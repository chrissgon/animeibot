name: flow

steps:
  init:
    next:
      default: intro

  end:
    action: End

  error:
    action: Text
    parameters:
      texts:
        - ğŸ˜• Desculpe, nÃ£o pude encontrar nada...

  # general
  intro:
    action: Text
    next:
      default: commands
    parameters:
      texts:
        - ğŸ‘‹ğŸ» OlÃ¡ visitante
        - ""
        - ğŸ¤– Encontre animes e mangas com o Animei Bot

  commands:
    action: Button
    next:
      Mangas: mangaIntro
      Animes: animeIntro
      default: nocommand
    parameters:
      texts:
        - "Selecione o que deseja procurar ğŸ‘‡ğŸ»"
      buttons:
        - Mangas
        - Animes

  nocommand:
    action: Text
    next:
      default: commands
    parameters:
      texts:
        - ğŸ˜µ Desculpe, selecione uma das opÃ§Ãµes

  stop:
    action: Stop
    next:
      default: goodbye
  
  goodbye:
    action: Text
    parameters:
      texts:
        - ğŸ˜‰ Pesquisa finalizada
    next:
      default: end

  # manga
  mangaIntro:
    action: Text
    next:
      default: mangaInput
    parameters:
      texts:
        - ğŸ¤© Certo, vamos procurar pelo seu manga!

  mangaInput:
    action: Input
    next:
      .+ [0-9]{1,}: manga
      default: mangaInputError
    parameters:
      texts:
        - ğŸ¤” Qual o nome e capÃ­tulo?
        - ""
        - "ğŸ‘‰ğŸ» Exemplo: Naruto 1"

  mangaInputError:
    action: Text
    next:
      default: mangaInput
    parameters:
      texts:
        - ğŸ˜• Desculpe, nÃ£o entendi o que quis dizer.

  manga:
    action: Manga
    next:
      \/stop: stop
      default: waitManga
    parameters:
      texts:
        - ğŸ” Iniciando a procura...
        - ""
        - âŒ Caso deseje cancelar a pesquisa, digite /stop

  waitManga:
    action: Wait
    next:
      \/stop: stop
      default: waitManga

  # animes
  animeAlert:
    action: Text
    next:
      default: commands
    parameters:
      texts:
        - ğŸ˜¢ Infelizmente a pesquisa por animes ainda nÃ£o estÃ¡ disponÃ­vel. Por favor, selecione outra opÃ§Ã£o

  animeIntro:
    action: Text
    next:
      default: animeInput
    parameters:
      texts:
        - ğŸ¤© Certo, vamos procurar pelo seu anime!

  animeInput:
    action: Input
    next:
      .+ [0-9]{1,}: anime
      default: animeInputError
    parameters:
      texts:
        - ğŸ¤” Qual o nome e capÃ­tulo?
        - ""
        - "ğŸ‘‰ğŸ» Exemplo: Naruto 1"

  animeInputError:
    action: Text
    next:
      default: animeInput
    parameters:
      texts:
        - ğŸ˜• Desculpe, nÃ£o entendi o que quis dizer.

  anime:
    action: Anime
    next:
      \/stop: stop
      default: waitAnime
    parameters:
      texts:
        - ğŸ” Iniciando a procura...
        - ""
        - âŒ Caso deseje cancelar a pesquisa, digite /stop

  waitAnime:
    action: Wait
    next:
      \/stop: stop
      default: waitAnime
